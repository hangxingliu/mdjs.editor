String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.lastIndexOf(e,t);return n!==-1&&n===t}),function(){function e(e){var e=e.replace(/&/g,"&gt;");return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"</br>")}function t(e){var t={},r=[];this.set=function(n,i,o){o&&(i.id=r.push(i)),i.url=e.func.footNoteName(i.id),t[n.toLowerCase()]=i},this.get=function(e){return t[e.toLowerCase()]},this.getFootNoteList=function(){return r}}function r(){var e=[],t=[],r=0;this.topLevel=function(){return r?e[r-1]:-1},this.topType=function(){return r?t[r-1]:-1},this.push=function(n,i){e.push(n),t.push(i),r++},this.pop=function(){e.pop(),t.pop(),r=e.length}}function n(){this.tag={hr:"<hr />",br:"<br />",p:["<p>","</p>"],quote:["<blockquote>","</blockquote>"],del:["<del>","</del>"],strong:["<strong>","</strong>"],em:["<em>","</em>"],inlineCode:["<code>","</code>"],codeBlock:['<pre><code data-lang="$language">',"</code></pre>"],list:["<ul>","</ul>"],orderList:["<ol>","</ol>"],listItem:["<li>","</li>"],toc:['<div class="md_toc">',"</div>"],tocList:["<ol>","</ol>"],tocItem:['<a href="#$uri"><li>',"</li></a>"],footNote:['<div class="md_foot"><ol>',"</ol></div>"]},this.func={heading:function(e,t,r){return"<h"+e+' id="'+t+'" name="'+t+'">'+r+"</h"+e+">"},link:function(t,r,n){return'<a title="'+e(r)+'" href="'+encodeURI(t)+'">'+n+"</a>"},email:function(e){return'<a href="mailto:'+e+'">'+e+"</a>"},image:function(t,r,n){return'<img alt="'+e(n)+'" title="'+e(r)+'" src="'+encodeURI(t)+'" />'},table:function(e,t){return'<table class="md_table"><thead>'+e+"</thead><tbody>"+t+"</tbody></table>"},tableRow:function(e,t,r){for(var n="<tr>",i=e?'<th style="text-align: {0}">':'<td style="text-align: {0}">',o=e?"</th>":"</td>",l=["left","center","right"],a=0;a<t.length;a++)n+=i.replace("{0}",l[r[a]])+t[a]+o;return n+"</tr>"},footNoteLink:function(t,r,n){return'<sup><a title="'+e(r)+'" href="#'+encodeURI(t)+'">'+n+"</a></sup>"},footNote:function(e,t){return'<li name="'+e+'" id="'+e+'">'+t+"</li>"},footNoteName:function(e){return"markdown_foot_"+e}};var t=[];this.addRefLinkProvider=function(e){return t.push(e)},this._resolveRefLink=function(e){for(var r,n=0;n<t.length;n++)if(r=t[n](e))return r.url?r:{url:r}}}function i(i){function v(e){e=e.trim();var t={url:e,title:""},r=e.match(/(.+?)\s+(.+)/);if(!r)return t;t.url=r[1];var n=r[2],i=n[0],o=n[n-1];return n.length>=2&&(("'"==i||'"'==i)&&i==o||"("==i&&")"==o)&&(n=n.slice(1,-1)),t.title=n,t}function b(e){var t=e[0];if("="!=t&&"-"!=t&&"_"!=t&&"*"!=t)return!1;for(var r=0,n=0;r<e.length;r++)if(" "!=e[r]&&"\t"!=e[r]){if(e[r]!=t)return!1;n++}return n>=3}function k(e){for(var t=0,r=0;r<e.length;r++)if(" "==e[r])t++;else{if("\t"!=e[r])break;t+=4}return t}function w(e){for(var t=0;t<e.length&&"#"==e[t];t++);return!!t&&t}function L(e){return e.endsWith("  ")}function y(e){return e.replace(c,"_").replace(/^_/,"").replace(/_$/,"")}function N(t,r,n){for(var i="",o=t.length,l=0,a="",c="",u=0,s=[],h=[],g=-1,p=[],m=[],v=[],j=0,W=!0,M=!1,B="",T={},A=0,E=0;E<o;E++)if(a=t[E],c=a.trim(),l){if("```"==c){l=0,i+=q.codeBlock[1];continue}i+=(l++>1?"\n":"")+e(a)}else{u=k(a);var U=_(c);if(0==U)if(i+=x(),0!=c.length){if(u<4){if(c.startsWith("```")){var H=c.slice(3).trim();i+=q.codeBlock[0].replace(d,H),l=1;continue}if(0!=(A=w(c))){for(var P=c.length-1;P>A&&"#"==c[P];P--);var z=c.slice(A,P+1),D=z=$(z,0);v[j]=A,p[j]=D=D.trim().replace(f,""),m[j++]=D=y(D),i+=C.heading(A,D,z);continue}if(">"==c[0]&&c.length>1){for(var G=[],J=E;J<o&&(B=t[J].trim(),0!=B.length);J++){if(">"==B[0])B=B.slice(1)+(L(t[J])?"  ":"");else{if(r)break;B=t[J]}G.push(B)}i+=q.quote[0]+N(G,!0,n)+q.quote[1],E=J-1;continue}if(b(c)){i+=q.hr;continue}if("[TOC]"==c){g=i.length;continue}if(0!=(s=F(c))&&E<o-1&&0!=(h=R(t[E+1].trim(),s.length))){for(var K=C.tableRow(!0,s,h),Q="",V=E+2;V<o&&0!=(s=F(t[V].trim()));V++)Q+=C.tableRow(!1,s,h);E=V-1,i+=C.table(K,Q);continue}}else if(0==E||0==t[E-1].trim().length){i+=q.codeBlock[0].replace(d,"");for(var X,Y="",Z=E,V=E;V<o;V++)if(0!=t[V].trim().length){if((X=k(t[V]))<4)break;i+=Y+(V==E?"":"\n")+O(X-2)+e(t[V].trim()),Y="",Z=V}else Y+="\n";i+=q.codeBlock[1],E=Z;continue}if(E+1<o){var ee=t[E+1].trim();if(b(ee)){var te=3;"="==ee[0]?te=1:"-"==ee[0]&&(te=2);var D=z=$(c,0);v[j]=te,p[j]=D=D.trim().replace(f,""),m[j++]=D=y(D),i+=C.heading(te,D,z),E++;continue}}T={},B=$(a,0,T),B.trim(),W&&T.onlyOneImg?i+=B:(W&&(B=q.p[0]+B,M=!1),(n.alwaysNewline&&!W||M)&&(i+=q.br),M=L(a),i+=B,W=!1)}else W||(i+=(M?q.br:"")+q.p[1],W=!0);else i+=I(u,U,c)}return W||(i+=(M?q.br:"")+q.p[1],W=!0),g!=-1&&(i=i.slice(0,g)+S(p,m,v)+i.slice(g)),i}function S(e,t,r){for(var n,i,o=q.toc[0],l=[],a=0;a<e.length;a++)i=q.tocItem[0].replace("$uri",t[a])+e[a]+q.tocItem[1],0==l.length||r[a]>n?(o+=q.tocList[0]+i,l.push(n=r[a])):r[a]==n?o+=i:(o+=q.tocList[1],l.pop(),n=l[l.length-1],a--);for(;l.length;)o+=q.tocList[1],l.pop();return o+q.toc[1]}function _(e){return b(e)?0:e.search(a)!=-1?1:e.search(l)!=-1?2:0}function I(e,t,r){var n=B.topLevel(),i=q.listItem[0]+$(r,r.indexOf(" "))+q.listItem[1],o="";if(e>n)return B.push(e,t),(1==t?q.orderList:q.list)[0]+i;if(e==n)return i;for(;e<n;)o+=1==B.topType()?q.orderList[1]:q.list[1],B.pop(),n=B.topLevel();return n==-1?(B.push(e,t),o+(1==t?q.orderList:q.list)[0]+i):o+i}function x(){for(var e="";B.topLevel()!=-1;)e+=1==B.topType()?q.orderList[1]:q.list[1],B.pop();return e}function R(e,t){var r=F(e,!0),n=[],i=0,o=0;if(0==r)return!1;for(var l=r.length;i<l;i++,o=0)r[i].length<=1?n[i]=0:(":"==r[i][r[i].length-1]&&(o=":"==r[i][0]?1:2),n[i]=o);for(;i<t;i++)n[i]=0;return n}function F(e,t){var r=[],n=e.length,i="";void 0==t&&(t=!1);for(var o="|"==e[0]?1:0;o<n;o++){switch(e[o]){case"\\":if(t)return!1;i+="\\","|"==e[o+1]&&(i+="|",o++);continue;case"|":if(i=i.trim(),t&&0==i.length)return!1;r.push(i),i="";continue}if(t&&":"!=e[o]&&"-"!=e[o]&&" "!=e[o]&&"\t"!=e[o])return!1;i+=e[o]}return(0!=r.length||"|"==e[0])&&(i=i.trim(),0!=i.length&&r.push(i),r)}function O(e){return e<=0?"":m.slice(0,e)}function $(t,r,n){for(var i,l,a,f,c,h,g,p,d,m=t.length,b=[],k="",w=-1,L=-1,y=-1,N=-1,S=-1,_="*",I="*",x=0,R=r||0;R<m;R++)switch(t[R]){case"\\":o.indexOf(t[R+1])>=0&&(w=b.length,L=++R),k+=t[R];break;case"`":h="`"==t[R+1]?"``":"`",g=h.length,(i=t.indexOf(h,R+g))==-1?k+=h:(k+=q.inlineCode[0]+e(t.slice(R+g,i))+q.inlineCode[1],R=i),R+=g-1;break;case"~":"~"==t[R+1]?(S>=0?""==k?b[S]+="~~":(b[S]+=q.del[0],k+=q.del[1],S=-1):(S=b.push(k)-1,k=""),R++):k+="~";break;case"*":case"_":if(!(" "!=t[R+1]&&"\t"!=t[R+1]||" "!=t[R-1]&&"\t"!=t[R-1])){k+=t[R];break}if(t[R+1]==t[R]){if(y>=0){if(_!=t[R]){k+=t[R++]+t[R];break}b[y]+=q.strong[0],k+=q.strong[1],y=-1}else t[R+2]==t[R]&&t[R+3]==t[R]&&(k+=t[R++]+t[R++]),y=b.push(k)-1,k="",_=t[R];R++}else if(N>=0){if(I!=t[R]){k+=t[R];break}b[N]+=q.em[0],k+=q.em[1],N=-1}else N=b.push(k)-1,k="",I=t[R];break;case">":k+=R>=2&&"--"==t.slice(R-2,R)?"-->":">";break;case"<":if("!--"==t.slice(R+1,R+4)){k+="<!--";break}for(d=1,i=R+1;i<m&&">"!=t[i];i++)" "!=t[i]&&"\t"!=t[i]||(d=0);if(i>=m){k+="&lt;";break}if(h=t.slice(R+1,i),d){if(h.match(u)){k+=C.link(h,"",h),R=i;break}if(h.match(s)){k+=C.email(h),R=i;break}}k+="<";break;case"!":"["!=t[R+1]&&(k+="!");break;case"[":l="!"!=t[R-1]||w==b.length&&L==R-1?"^"==t[R+1]?"s":"":"i";for(var F=0,O=R+1,j=0;O<m;O++)switch(t[O]){case"!":if("["!=t[O+1])break;""!=l?O=m:(F=1,O++);break;case"`":h="`"==t[O+1]?"``":"`",g=h.length,(i=t.indexOf(h,O+g))==-1?O+=g-1:O=i+g-1;break;case"[":O=m;break;case"]":if(a=t.slice(R+1,O),"s"==l){p=M.get(a),p&&(k+=C.footNoteLink(p.url,p.title,p.id),j=1,R=O,O=m);break}h=t[O+1];var B;if("("==h)B=")";else{if("["!=h&&(" "!=h||"["!=t[O+2])){O=m;break}B="]"}if(g=" "==h?O+3:O+2,(i=t.indexOf(B,g))!=-1){if(F){F=0;break}var T=t.slice(g,i).trim();if("]"==B){if(0==T.length&&(T=a),!(p=M.get(T))&&!(p=W._resolveRefLink(T))){O=m;break}}else p=v(T);f=p.url,c=p.title||"","i"==l?(b.push(k),b.push(C.image(f,c,a)),k="",x++):k+=C.link(f,c,$(a,0)),j=1,R=i}O=m}if(!j&&O>=m)switch(l){case"s":k+="[^",R++;break;case"i":k+="![";break;default:k+="["}break;default:k+=t[R]}if(b.push(k),S!=-1&&(b[S]+="~~"),y!=-1&&(b[y]+=_+_),N!=-1&&(b[N]+=I),1==x){var A=0;for(var E in b)A+=b[E].trim()?1:0;1==A&&n&&(n.onlyOneImg=!0)}return b.join("")}function j(){var e=M.getFootNoteList();if(0==e.length)return"";var t=q.footNote[0];return e.forEach(function(e){return t+=C.footNote(e.url,$(e.content,0))}),t+q.footNote[1]}var W=new n;i&&(W=i);var q=W.tag,C=W.func,M=new t(W),B=new r;this.render=W,this.md2html=function(e,n){n=n||{},e="string"==typeof e?e:String(e),M=new t(W),B=new r;for(var i=e.replace(h,"\n").split(g),o=i.length,l=[],a="",f=0;f<o;f++){a=i[f];var c=a.trim().match(p);if(c){var u,s=!1,d="";if(s="^"==c[1]){d=c[3];for(var m=f+1;m<o&&(a=i[m].trim())&&!a.match(p);m++,f++)d+="\n"+i[m];u={title:c[2],content:d}}else u=v(c[3].trim());M.set(c[1]+c[2],u,s)}else l.push(a)}return N(l,!1,n)+j()}}var o="#`*[]()-_{}+.!|\\",l=/^[\*\-\+] +\S*/g,a=/^\d+\. +\S*/g,f=/<\/?[^<>]+>/g,c=/\W+/g,u=/^\w+:\/{2,3}\S+$/g,s=/^\S+@\S+\.\S+$/g,h=/\r\n/g,g=/[\r\n]/,p=/^\[([\^]?)(.+)\]\:\s+(.+)$/,d=/\$language/g,m=new Array(1024).join(" "),v=new i;i.md2html=function(e,t){return v.md2html(e,t)},i.escapedHTML=e,i.MdjsRenderer=n,i.Mdjs=i,"object"==typeof module&&"object"==typeof global&&(module.exports=global.Mdjs=i),"undefined"!=typeof window&&(window.Mdjs=i)}();
//# sourceMappingURL=mdjs.min.js.map