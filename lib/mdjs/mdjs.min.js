String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.lastIndexOf(e,t);return n!==-1&&n===t}),function(){function e(e){var e=e.replace(/&/g,"&gt;");return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"</br>")}function t(e){var t={},r=[];this.set=function(n,i,o){o&&(i.id=r.push(i)),i.url=e.func.footNoteName(i.id),t[n.toLowerCase()]=i},this.get=function(e){return t[e.toLowerCase()]},this.getFootNoteList=function(){return r}}function r(){var e=[],t=[],r=0;this.topLevel=function(){return r?e[r-1]:-1},this.topType=function(){return r?t[r-1]:-1},this.push=function(n,i){e.push(n),t.push(i),r++},this.pop=function(){e.pop(),t.pop(),r=e.length}}function n(){this.tag={hr:"<hr />",br:"<br />",p:["<p>","</p>"],quote:["<blockquote>","</blockquote>"],del:["<del>","</del>"],strong:["<strong>","</strong>"],em:["<em>","</em>"],inlineCode:["<code>","</code>"],codeBlock:['<pre><code data-lang="$language">',"</code></pre>"],list:["<ul>","</ul>"],orderList:["<ol>","</ol>"],listItem:["<li>","</li>"],toc:['<div class="md_toc">',"</div>"],tocList:["<ol>","</ol>"],tocItem:['<a href="#$uri"><li>',"</li></a>"],footNote:['<div class="md_foot"><ol>',"</ol></div>"]},this.func={heading:function(e,t,r){return"<h"+e+' id="'+t+'" name="'+t+'">'+r+"</h"+e+">"},link:function(t,r,n){return'<a title="'+e(r)+'" href="'+encodeURI(t)+'">'+n+"</a>"},email:function(e){return'<a href="mailto:'+e+'">'+e+"</a>"},image:function(t,r,n){return'<img alt="'+e(n)+'" title="'+e(r)+'" src="'+encodeURI(t)+'" />'},table:function(e,t){return'<table class="md_table"><thead>'+e+"</thead><tbody>"+t+"</tbody></table>"},tableRow:function(e,t,r){for(var n="<tr>",i=e?'<th style="text-align: {0}">':'<td style="text-align: {0}">',o=e?"</th>":"</td>",l=["left","center","right"],a=0;a<t.length;a++)n+=i.replace("{0}",l[r[a]])+t[a]+o;return n+"</tr>"},footNoteLink:function(t,r,n){return'<sup><a title="'+e(r)+'" href="#'+encodeURI(t)+'">'+n+"</a></sup>"},footNote:function(e,t){return'<li name="'+e+'" id="'+e+'">'+t+"</li>"},footNoteName:function(e){return"markdown_foot_"+e}};var t=[];this.addRefLinkProvider=function(e){return t.push(e)},this._resolveRefLink=function(e){for(var r,n=0;n<t.length;n++)if(r=t[n](e))return r.url?r:{url:r}}}function i(i){function m(e){e=e.trim();var t={url:e,title:""},r=e.match(/(.+?)\s+(.+)/);if(!r)return t;t.url=r[1];var n=r[2],i=n[0],o=n[n-1];return n.length>=2&&(("'"==i||'"'==i)&&i==o||"("==i&&")"==o)&&(n=n.slice(1,-1)),t.title=n,t}function v(e){var t=e[0];if("="!=t&&"-"!=t&&"_"!=t&&"*"!=t)return!1;for(var r=0,n=0;r<e.length;r++)if(" "!=e[r]&&"\t"!=e[r]){if(e[r]!=t)return!1;n++}return n>=3}function b(e){for(var t=0,r=0;r<e.length;r++)if(" "==e[r])t++;else{if("\t"!=e[r])break;t+=4}return t}function k(e){for(var t=0;t<e.length&&"#"==e[t];t++);return!!t&&t}function w(e){return e.endsWith("  ")}function L(t,r,n){for(var i="",o=t.length,l=0,a="",c="",s=0,u=[],h=[],g=-1,d=[],m=[],O=0,j=!0,C=!1,M="",W={},B=0,T=0;T<o;T++)if(a=t[T],c=a.trim(),l){if("```"==c){l=!1,i+=$.codeBlock[1];continue}i+=(l?"\n":"")+e(t[T])}else{s=b(a);var A=N(c);if(0==A)if(i+=I(),0!=c.length){if(s<4){if(c.startsWith("```")){var E=c.slice(3).trim();i+=$.codeBlock[0].replace(p,E),l=!0;continue}if(0!=(B=k(c))){for(var U=c.length-1;U>B&&"#"==c[U];U--);var H=c.slice(B,U+1),P=H=F(H,0);m[O]=B,d[O++]=P=P.trim().replace(f,""),i+=q.heading(B,P,H);continue}if(">"==c[0]&&c.length>1){for(var z=[],D=T;D<o&&(M=t[D].trim(),0!=M.length);D++){if(">"==M[0])M=M.slice(1)+(w(t[D])?"  ":"");else{if(r)break;M=t[D]}z.push(M)}i+=$.quote[0]+L(z,!0,n)+$.quote[1],T=D-1;continue}if(v(c)){i+=$.hr;continue}if("[TOC]"==c){g=i.length;continue}if(0!=(u=R(c))&&T<o-1&&0!=(h=x(t[T+1].trim(),u.length))){for(var G=q.tableRow(!0,u,h),J="",K=T+2;K<o&&0!=(u=R(t[K].trim()));K++)J+=q.tableRow(!1,u,h);T=K-1,i+=q.table(G,J);continue}}else if(0==T||0==t[T-1].trim().length){i+=$.codeBlock[0].replace(p,"");for(var Q,V="",X=T,K=T;K<o;K++)if(0!=t[K].trim().length){if((Q=b(t[K]))<4)break;i+=V+(K==T?"":"\n")+_(Q-2)+e(t[K].trim()),V="",X=K}else V+="\n";i+=$.codeBlock[1],T=X;continue}if(T+1<o){var Y=t[T+1].trim();if(v(Y)){var Z=3;"="==Y[0]?Z=1:"-"==Y[0]&&(Z=2);var P=H=F(c,0);m[O]=Z,d[O++]=P=P.trim().replace(f,""),i+=q.heading(Z,P,H),T++;continue}}W={},M=F(a,0,W),M.trim(),j&&W.onlyOneImg?i+=M:(j&&(M=$.p[0]+M,C=!1),(n.alwaysNewline&&!j||C)&&(i+=$.br),C=w(a),i+=M,j=!1)}else j||(i+=(C?$.br:"")+$.p[1],j=!0);else i+=S(s,A,c)}return j||(i+=(C?$.br:"")+$.p[1],j=!0),g!=-1&&(i=i.slice(0,g)+y(d,m)+i.slice(g)),i}function y(e,t){for(var r,n,i=$.toc[0],o=[],l=0;l<e.length;l++)n=$.tocItem[0].replace("$uri",e[l])+e[l]+$.tocItem[1],0==o.length||t[l]>r?(i+=$.tocList[0]+n,o.push(r=t[l])):t[l]==r?i+=n:(i+=$.tocList[1],o.pop(),r=o[o.length-1],l--);for(;o.length;)i+=$.tocList[1],o.pop();return i+$.toc[1]}function N(e){return v(e)?0:e.search(a)!=-1?1:e.search(l)!=-1?2:0}function S(e,t,r){var n=M.topLevel(),i=$.listItem[0]+F(r,r.indexOf(" "))+$.listItem[1],o="";if(e>n)return M.push(e,t),(1==t?$.orderList:$.list)[0]+i;if(e==n)return i;for(;e<n;)o+=1==M.topType()?$.orderList[1]:$.list[1],M.pop(),n=M.topLevel();return n==-1?(M.push(e,t),o+(1==t?$.orderList:$.list)[0]+i):o+i}function I(){for(var e="";M.topLevel()!=-1;)e+=1==M.topType()?$.orderList[1]:$.list[1],M.pop();return e}function x(e,t){var r=R(e,!0),n=[],i=0,o=0;if(0==r)return!1;for(var l=r.length;i<l;i++,o=0)r[i].length<=1?n[i]=0:(":"==r[i][r[i].length-1]&&(o=":"==r[i][0]?1:2),n[i]=o);for(;i<t;i++)n[i]=0;return n}function R(e,t){var r=[],n=e.length,i="";void 0==t&&(t=!1);for(var o="|"==e[0]?1:0;o<n;o++){switch(e[o]){case"\\":if(t)return!1;i+="\\","|"==e[o+1]&&(i+="|",o++);continue;case"|":if(i=i.trim(),t&&0==i.length)return!1;r.push(i),i="";continue}if(t&&":"!=e[o]&&"-"!=e[o]&&" "!=e[o]&&"\t"!=e[o])return!1;i+=e[o]}return(0!=r.length||"|"==e[0])&&(i=i.trim(),0!=i.length&&r.push(i),r)}function _(e){return e<=0?"":d.slice(0,e)}function F(t,r,n){for(var i,l,a,f,u,h,g,p,d,v=t.length,b=[],k="",w=-1,L=-1,y=-1,N=-1,S=-1,I="*",x="*",R=0,_=r||0;_<v;_++)switch(t[_]){case"\\":o.indexOf(t[_+1])>=0&&(w=b.length,L=++_),k+=t[_];break;case"`":h="`"==t[_+1]?"``":"`",g=h.length,(i=t.indexOf(h,_+g))==-1?k+=h:(k+=$.inlineCode[0]+e(t.slice(_+g,i))+$.inlineCode[1],_=i),_+=g-1;break;case"~":"~"==t[_+1]?(S>=0?""==k?b[S]+="~~":(b[S]+=$.del[0],k+=$.del[1],S=-1):(S=b.push(k)-1,k=""),_++):k+="~";break;case"*":case"_":if(!(" "!=t[_+1]&&"\t"!=t[_+1]||" "!=t[_-1]&&"\t"!=t[_-1])){k+=t[_];break}if(t[_+1]==t[_]){if(y>=0){if(I!=t[_]){k+=t[_++]+t[_];break}b[y]+=$.strong[0],k+=$.strong[1],y=-1}else t[_+2]==t[_]&&t[_+3]==t[_]&&(k+=t[_++]+t[_++]),y=b.push(k)-1,k="",I=t[_];_++}else if(N>=0){if(x!=t[_]){k+=t[_];break}b[N]+=$.em[0],k+=$.em[1],N=-1}else N=b.push(k)-1,k="",x=t[_];break;case">":k+=_>=2&&"--"==t.slice(_-2,_)?"-->":">";break;case"<":if("!--"==t.slice(_+1,_+4)){k+="<!--";break}for(d=1,i=_+1;i<v&&">"!=t[i];i++)" "!=t[i]&&"\t"!=t[i]||(d=0);if(i>=v){k+="&lt;";break}if(h=t.slice(_+1,i),d){if(h.match(c)){k+=q.link(h,"",h),_=i;break}if(h.match(s)){k+=q.email(h),_=i;break}}k+="<";break;case"!":"["!=t[_+1]&&(k+="!");break;case"[":l="!"!=t[_-1]||w==b.length&&L==_-1?"^"==t[_+1]?"s":"":"i";for(var O=0,M=_+1,W=0;M<v;M++)switch(t[M]){case"!":if("["!=t[M+1])break;""!=l?M=v:(O=1,M++);break;case"`":h="`"==t[M+1]?"``":"`",g=h.length,(i=t.indexOf(h,M+g))==-1?M+=g-1:M=i+g-1;break;case"[":M=v;break;case"]":if(a=t.slice(_+1,M),"s"==l){p=C.get(a),p&&(k+=q.footNoteLink(p.url,p.title,p.id),W=1,_=M,M=v);break}h=t[M+1];var B;if("("==h)B=")";else{if("["!=h&&(" "!=h||"["!=t[M+2])){M=v;break}B="]"}if(g=" "==h?M+3:M+2,(i=t.indexOf(B,g))!=-1){if(O){O=0;break}var T=t.slice(g,i).trim();if("]"==B){if(0==T.length&&(T=a),!(p=C.get(T))&&!(p=j._resolveRefLink(T))){M=v;break}}else p=m(T);f=p.url,u=p.title||"","i"==l?(b.push(k),b.push(q.image(f,u,a)),k="",R++):k+=q.link(f,u,F(a,0)),W=1,_=i}M=v}if(!W&&M>=v)switch(l){case"s":k+="[^",_++;break;case"i":k+="![";break;default:k+="["}break;default:k+=t[_]}if(b.push(k),S!=-1&&(b[S]+="~~"),y!=-1&&(b[y]+=I+I),N!=-1&&(b[N]+=x),1==R){var A=0;for(var E in b)A+=b[E].trim()?1:0;1==A&&n&&(n.onlyOneImg=!0)}return b.join("")}function O(){var e=C.getFootNoteList();if(0==e.length)return"";var t=$.footNote[0];return e.forEach(function(e){return t+=q.footNote(e.url,F(e.content,0))}),t+$.footNote[1]}var j=new n;i&&(j=i);var $=j.tag,q=j.func,C=new t(j),M=new r;this.render=j,this.md2html=function(e,n){n=n||{},e="string"==typeof e?e:String(e),C=new t(j),M=new r;for(var i=e.replace(u,"\n").split(h),o=i.length,l=[],a="",f=0;f<o;f++){a=i[f];var c=a.trim().match(g);if(c){var s,p=!1,d="";if(p="^"==c[1]){d=c[3];for(var v=f+1;v<o&&(a=i[v].trim())&&!a.match(g);v++,f++)d+="\n"+i[v];s={title:c[2],content:d}}else s=m(c[3].trim());C.set(c[1]+c[2],s,p)}else l.push(a)}return L(l,!1,n)+O()}}var o="#`*[]()-_{}+.!|\\",l=/^[\*\-\+] +\S*/g,a=/^\d+\. +\S*/g,f=/<\/?[^<>]+>/g,c=/^\w+:\/{2,3}\S+$/g,s=/^\S+@\S+\.\S+$/g,u=/\r\n/g,h=/[\r\n]/,g=/^\[([\^]?)(.+)\]\:\s+(.+)$/,p=/\$language/g,d=new Array(1024).join(" "),m=new i;i.md2html=function(e,t){return m.md2html(e,t)},i.escapedHTML=e,i.MdjsRenderer=n,i.Mdjs=i,"object"==typeof module&&"object"==typeof global&&(module.exports=global.Mdjs=i),"undefined"!=typeof window&&(window.Mdjs=i)}();
//# sourceMappingURL=mdjs.min.js.map