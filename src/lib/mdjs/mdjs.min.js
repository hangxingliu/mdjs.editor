String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.lastIndexOf(e,t);return n!==-1&&n===t}),function(){function e(e){var e=e.replace(/&/g,"&gt;");return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"</br>")}function t(e){var t={},r=[];this.set=function(n,i,o){o&&(i.id=r.push(i)),i.url=e.func.footNoteName(i.id),t[n.toLowerCase()]=i},this.get=function(e){return t[e.toLowerCase()]},this.getFootNoteList=function(){return r}}function r(){var e=[],t=[],r=0;this.topLevel=function(){return r?e[r-1]:-1},this.topType=function(){return r?t[r-1]:-1},this.push=function(n,i){e.push(n),t.push(i),r++},this.pop=function(){e.pop(),t.pop(),r=e.length}}function n(){this.tag={hr:"<hr />",br:"<br />",p:["<p>","</p>"],quote:["<blockquote>","</blockquote>"],del:["<del>","</del>"],strong:["<strong>","</strong>"],em:["<em>","</em>"],inlineCode:["<code>","</code>"],codeBlock:['<pre><code data-lang="$language">',"</code></pre>"],list:["<ul>","</ul>"],orderList:["<ol>","</ol>"],listItem:["<li>","</li>"],toc:['<div class="md_toc">',"</div>"],tocList:["<ol>","</ol>"],tocItem:['<a href="#$uri"><li>',"</li></a>"],footNote:['<div class="md_foot"><ol>',"</ol></div>"]},this.func={heading:function(e,t,r){return"<h"+e+' id="'+t+'" name="'+t+'">'+r+"</h"+e+">"},link:function(t,r,n){return'<a title="'+e(r)+'" href="'+encodeURI(t)+'">'+n+"</a>"},email:function(e){return'<a href="mailto:'+e+'">'+e+"</a>"},image:function(t,r,n){return'<img alt="'+e(n)+'" title="'+e(r)+'" src="'+encodeURI(t)+'" />'},table:function(e,t){return'<table class="md_table"><thead>'+e+"</thead><tbody>"+t+"</tbody></table>"},tableRow:function(e,t,r){for(var n="<tr>",i=e?'<th style="text-align: {0}">':'<td style="text-align: {0}">',o=e?"</th>":"</td>",l=["left","center","right"],a=0;a<t.length;a++)n+=i.replace("{0}",l[r[a]])+t[a]+o;return n+"</tr>"},footNoteLink:function(t,r,n){return'<sup><a title="'+e(r)+'" href="#'+encodeURI(t)+'">'+n+"</a></sup>"},footNote:function(e,t){return'<li name="'+e+'" id="'+e+'">'+t+"</li>"},footNoteName:function(e){return"markdown_foot_"+e}};var t=[];this.addRefLinkProvider=function(e){return t.push(e)},this._resolveRefLink=function(e){for(var r,n=0;n<t.length;n++)if(r=t[n](e))return r.url?r:{url:r}}}function i(i){function m(e){e=e.trim();var t={url:e,title:""},r=e.match(/(.+?)\s+(.+)/);if(!r)return t;t.url=r[1];var n=r[2],i=n[0],o=n[n-1];return n.length>=2&&(("'"==i||'"'==i)&&i==o||"("==i&&")"==o)&&(n=n.slice(1,-1)),t.title=n,t}function v(e){var t=e[0];if("="!=t&&"-"!=t&&"_"!=t&&"*"!=t)return!1;for(var r=0,n=0;r<e.length;r++)if(" "!=e[r]&&"\t"!=e[r]){if(e[r]!=t)return!1;n++}return n>=3}function b(e){for(var t=0,r=0;r<e.length;r++)if(" "==e[r])t++;else{if("\t"!=e[r])break;t+=4}return t}function k(e){for(var t=0;t<e.length&&"#"==e[t];t++);return!!t&&t}function w(e){return e.endsWith("  ")}function L(t,r,n){for(var i="",o=t.length,l=0,a="",s="",c=0,u=[],h=[],g=-1,d=[],m=[],j=0,O=!0,q="",C="",M=0,B=0;B<o;B++)if(a=t[B],s=a.trim(),l){if("```"==s){l=!1,i+=W.codeBlock[1];continue}i+=(l?"\n":"")+e(t[B])}else{c=b(a);var T=N(s);if(0==T)if(i+=S(),0!=s.length){if(c<4){if(s.startsWith("```")){var A=s.slice(3).trim();i+=W.codeBlock[0].replace(p,A),l=!0;continue}if(M=k(s),0!=M){for(var E=s.length-1;E>M&&"#"==s[E];E--);var U=s.slice(M,E+1),H=U=F(U,0);m[j]=M,d[j++]=H=H.trim().replace(f,""),i+=$.heading(M,H,U);continue}if(">"==s[0]&&s.length>1){for(var P=[],z=B;z<o&&(q=t[z].trim(),0!=q.length);z++){if(">"==q[0])q=q.slice(1)+(w(t[z])?"  ":"");else{if(r)break;q=t[z]}P.push(q)}i+=W.quote[0]+L(P,!0,n)+W.quote[1],B=z-1;continue}if(v(s)){i+=W.hr;continue}if("[TOC]"==s){g=i.length;continue}if(0!=(u=R(s))&&B<o-1&&0!=(h=I(t[B+1].trim(),u.length))){for(var D=$.tableRow(!0,u,h),G="",J=B+2;J<o&&0!=(u=R(t[J].trim()));J++)G+=$.tableRow(!1,u,h);B=J-1,i+=$.table(D,G);continue}}else if(0==B||0==t[B-1].trim().length){i+=W.codeBlock[0].replace(p,"");for(var K,Q="",V=B,J=B;J<o;J++)if(0!=t[J].trim().length){if((K=b(t[J]))<4)break;i+=Q+(J==B?"":"\n")+_(K-2)+e(t[J].trim()),Q="",V=J}else Q+="\n";i+=W.codeBlock[1],B=V;continue}if(B+1<o){var X=t[B+1].trim();if(v(X)){var Y=3;"="==X[0]?Y=1:"-"==X[0]&&(Y=2);var H=U=F(s,0);m[j]=Y,d[j++]=H=H.trim().replace(f,""),i+=$.heading(Y,H,U),B++;continue}}q=F(a,0),C=q.trim(),O&&C.startsWith("<img ")&&C.endsWith("/>")&&C.indexOf("<img ",1)==-1?i+=q:(O&&(q=W.p[0]+q),(n.alwaysNewline||w(a))&&(q+=W.br),i+=q,O=!1)}else O||(i+=W.p[1],O=!0);else i+=x(c,T,s)}return g!=-1&&(i=i.slice(0,g)+y(d,m,j)+i.slice(g)),i}function y(e,t){for(var r,n,i=W.toc[0],o=[],l=0;l<e.length;l++)n=W.tocItem[0].replace("$uri",e[l])+e[l]+W.tocItem[1],0==o.length||t[l]>r?(i+=W.tocList[0]+n,o.push(r=t[l])):t[l]==r?i+=n:(i+=W.tocList[1],o.pop(),r=o[o.length-1],l--);for(;o.length;)i+=W.tocList[1],o.pop();return i+W.toc[1]}function N(e){return v(e)?0:e.search(a)!=-1?1:e.search(l)!=-1?2:0}function x(e,t,r){var n=C.topLevel(),i=W.listItem[0]+F(r,r.indexOf(" "),0)+W.listItem[1],o="";if(e>n)return C.push(e,t),(1==t?W.orderList:W.list)[0]+i;if(e==n)return i;for(;e<n;)o+=1==C.topType()?W.orderList[1]:W.list[1],C.pop(),n=C.topLevel();return n==-1?(C.push(e,t),o+(1==t?W.orderList:W.list)[0]+i):o+i}function S(){for(var e="";C.topLevel()!=-1;)e+=1==C.topType()?W.orderList[1]:W.list[1],C.pop();return e}function I(e,t){var r=R(e,!0),n=[],i=0,o=0;if(0==r)return!1;for(var l=r.length;i<l;i++,o=0)r[i].length<=1?n[i]=0:(":"==r[i][r[i].length-1]&&(o=":"==r[i][0]?1:2),n[i]=o);for(;i<t;i++)n[i]=0;return n}function R(e,t){var r=[],n=e.length,i="";void 0==t&&(t=!1);for(var o="|"==e[0]?1:0;o<n;o++){switch(e[o]){case"\\":if(t)return!1;i+="\\","|"==e[o+1]&&(i+="|",o++);continue;case"|":if(i=i.trim(),t&&0==i.length)return!1;r.push(i),i="";continue}if(t&&":"!=e[o]&&"-"!=e[o]&&" "!=e[o]&&"\t"!=e[o])return!1;i+=e[o]}return(0!=r.length||"|"==e[0])&&(i=i.trim(),0!=i.length&&r.push(i),r)}function _(e){return e<=0?"":d.slice(0,e)}function F(t,r){for(var n,i,l,a,f,u,h,g,p,d=t.length,v=[],b="",k=-1,w=-1,L=-1,y=-1,N=-1,x="*",S="*",I=r||0;I<d;I++)switch(t[I]){case"\\":o.indexOf(t[I+1])>=0&&(k=v.length,w=++I),b+=t[I];break;case"`":u="`"==t[I+1]?"``":"`",h=u.length,(n=t.indexOf(u,I+h))==-1?b+=u:(b+=W.inlineCode[0]+e(t.slice(I+h,n))+W.inlineCode[1],I=n),I+=h-1;break;case"~":"~"==t[I+1]?(N>=0?""==b?v[N]+="~~":(v[N]+=W.del[0],b+=W.del[1],N=-1):(N=v.push(b)-1,b=""),I++):b+="~";break;case"*":case"_":if(!(" "!=t[I+1]&&"\t"!=t[I+1]||" "!=t[I-1]&&"\t"!=t[I-1])){b+=t[I];break}if(t[I+1]==t[I]){if(L>=0){if(x!=t[I]){b+=t[I++]+t[I];break}v[L]+=W.strong[0],b+=W.strong[1],L=-1}else t[I+2]==t[I]&&t[I+3]==t[I]&&(b+=t[I++]+t[I++]),L=v.push(b)-1,b="",x=t[I];I++}else if(y>=0){if(S!=t[I]){b+=t[I];break}v[y]+=W.em[0],b+=W.em[1],y=-1}else y=v.push(b)-1,b="",S=t[I];break;case">":b+=I>=2&&"--"==t.slice(I-2,I)?"-->":">";break;case"<":if("!--"==t.slice(I+1,I+4)){b+="<!--";break}for(p=1,n=I+1;n<d&&">"!=t[n];n++)" "!=t[n]&&"\t"!=t[n]||(p=0);if(n>=d){b+="&lt;";break}if(u=t.slice(I+1,n),p){if(s.test(u)){b+=$.link(u,"",u),I=n;break}if(c.test(u)){b+=$.email(u),I=n;break}}b+="<";break;case"!":"["!=t[I+1]&&(b+="!");break;case"[":i="!"!=t[I-1]||k==v.length&&w==I-1?"^"==t[I+1]?"s":"":"i";for(var R=0,_=I+1,j=0;_<d;_++)switch(t[_]){case"!":if("["!=t[_+1])break;""!=i?_=d:(R=1,_++);break;case"`":u="`"==t[_+1]?"``":"`",h=u.length,(n=t.indexOf(u,_+h))==-1?_+=h-1:_=n+h-1;break;case"[":_=d;break;case"]":if(l=t.slice(I+1,_),"s"==i){g=q.get(l),g&&(b+=$.footNoteLink(g.url,g.title,g.id),j=1,I=_,_=d);break}u=t[_+1];var C;if("("==u)C=")";else{if("["!=u&&(" "!=u||"["!=t[_+2])){_=d;break}C="]"}if(h=" "==u?_+3:_+2,(n=t.indexOf(C,h))!=-1){if(R){R=0;break}var M=t.slice(h,n).trim();if("]"==C){if(0==M.length&&(M=l),g=q.get(M),!g&&!(g=O._resolveRefLink(M))){_=d;break}}else g=m(M);a=g.url,f=g.title||"",b+="i"==i?$.image(a,f,l):$.link(a,f,F(l,0)),j=1,I=n}_=d}if(!j&&_>=d)switch(i){case"s":b+="[^",I++;break;case"i":b+="![";break;default:b+="["}break;default:b+=t[I]}return v.push(b),N!=-1&&(v[N]+="~~"),L!=-1&&(v[L]+=x+x),y!=-1&&(v[y]+=S),v.join("")}function j(){var e=q.getFootNoteList();if(0==e.length)return"";var t=W.footNote[0];return e.forEach(function(e){return t+=$.footNote(e.url,F(e.content,0))}),t+W.footNote[1]}var O=new n;i&&(O=i);var W=O.tag,$=O.func,q=new t(O),C=new r;this.render=O,this.md2html=function(e,n){n=n||{},e="string"==typeof e?e:String(e),q=new t(O),C=new r;for(var i=e.replace(u,"\n").split(h),o=i.length,l=[],a="",f=0;f<o;f++){a=i[f];var s=a.trim().match(g);if(s){var c,p=!1,d="";if(p="^"==s[1]){d=s[3];for(var v=f+1;v<o&&(a=i[v].trim(),a)&&!a.match(g);v++,f++)d+="\n"+i[v];c={title:s[2],content:d}}else c=m(s[3].trim());q.set(s[1]+s[2],c,p)}else l.push(a)}return L(l,!1,n)+j()}}var o="#`*[]()-_{}+.!|\\",l=/^[\*\-\+] +\S*/g,a=/^\d+\. +\S*/g,f=/<\/?[^<>]+>/g,s=/^\w+:\/{2,3}\S+$/g,c=/^[\w-]+@[\w-]+\.[\w\.-]+$/g,u=/\r\n/g,h=/[\r\n]/,g=/^\[([\^]?)(.+)\]\:\s+(.+)$/,p=/\$language/g,d=new Array(1024).join(" "),m=new i;i.md2html=function(e,t){return m.md2html(e,t)},i.escapedHTML=e,i.MdjsRenderer=n,i.Mdjs=i,"object"==typeof module&&"object"==typeof global&&(module.exports=global.Mdjs=i),"undefined"!=typeof window&&(window.Mdjs=i)}();
//# sourceMappingURL=mdjs.min.js.map